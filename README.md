# REDCap Custom Footer

[![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.5749904.svg)](https://doi.org/10.5281/zenodo.5749904)

A REDCap External Module that allows system admins and project admins to add custom footers to REDCap pages (survey, project, and system pages).

## Purpose

This External Module was designed to allow REDCap administrators to add custom footers to any pages displayed by REDCap. The reasons for wanting or having to add custom footers are most likely due to regulatory requirements, such as e.g. conformance with General Data Protection Regulations (GDPR) or other legal requirements.

In the EU, for instance, on each page of a website *direct* access to imprint information and privacy policies has to be provided. Usually, this is only necessary on publicly exposed pages, which in most cases is limited to REDCap survey pages. In some circumstances, however, REDCap's "regular" user interface (system pages, data entry pages) may be exposed to outside parties, e.g. participating physicians/institutions in a register study, and the duty to provide the information mentioned above has to be fulfilled.

Since recently, REDCap provides *"Settings relating to Data Privacy (e.g., GDPR)"* on the *"Edit a Project's Settings"* page (accessible from *Control Center*). However, the facilites provided there do not cover all scenarios outlined above. Thus, this External Module tries to fill this gap, by providing the means to add custom footers (containing any required information or appropriate links) as a system setting, as well as to provide a means for individual projects to add to (or replace) the system settings (if the REDCap administrator chooses to allow this).

## Effect

Custom footer messages will be injected into REDCap pages depending on the page type:

- **Survey pages**: Under the "Powerd by REDCap" line. The complete footer will remain visible even on small screens. If the standard footer is missing, like on the survey reCAPTCHA page, it is added first.
- **Project pages**: In the menu sidebar on the left side, as a new section following *Help & Information*.
- **Other pages** (such as the login page or *Home* or *My Projects*): Under the REDCap version and copyright notice.

## Requirements

- REDCAP 8.1.0 or newer (tested with REDCap 8.11.7 on a system running PHP 7.0.33).

## Installation

- Clone this repo into `<redcap-root>/modules/redcap_custom_footer_v<version-number>`, or
- Obtain this module from the Consortium [REDCap Repo](https://redcap.vumc.org/consortium/modules/index.php) via the Control Center.
- Go to _Control Center > Technical / Developer Tools > External Modules_ and enable REDCap JavaScript Injector.

## Configuration

Configuration of this module is designed such that the REDCap administrator is in total control of the module's settings, including control over what project admins can do.

### System-Level Settings

After enabling the module, REDCap administrators should configure the module and activate the *"Enable module on all projects by default"* setting. The settings *"Make module discoverable by users"* (off) and *"Module configuration permissions in projects"* (Require Project Setup/Design privilege) should be left at their defaults.

- **Enabled on**:
  Controls whether the custom footers set in the system settings should be disabled, or shown on all (*both*) or only specific (*Project / Data Entry Pages* or *Survey Pages*) pages.

- **Do not force a footer on pages lacking a #footer**:
  By default (unchecked), the module will add it's own footer to pages lacking a #footer \<div> (such as maybe pages generated by another external module or plugin). This can be suppressed by checking this option.

- **Title for section in left side menu**:
  As there is no good place on REDCap pages that feature the left-side menu to inject a footer (the existing footer is very resilient to manipulations), this module will inject the custom footers in the menu area on such pages. Here, a title can be set for the added section. If left blank, no header section will be added to the added menu panel.

- **Custom footer for project / data entry pages**:
  Add any Text/HTML to be injected as footer in data entry pages.

- **Custom footer for survey pages**:
  Choice to use the same custom footer as for data entry pages or a different one.

- **Custom footer for protected email page**:
  Choice to use the same custom footer as for data entry pages or a different one.

- **Remove REDCap's cookie policy link**:
  When checked, the cookie policy link will be remove. This setting is global and cannot be overridden in projects.


As noted above, REDCap administrators will have full control over what project admins can do with regard to this module. System settings will apply to all projects (provided the option to automatically activate this module on all projects by default is activated, and the module has not subsequently been disabled in a project).

Note that superusers can always access the project configuration and disable this module for any project.

- **Allow project admins to configure settings**: The *Configure* button can be hidden for all projects or enabled for all or only selected projects. By default, project-specific configuration of the module is prohibited.

- **Allow override of system settings in projects**: Override means that project footers can replace the footers set on the system level. Otherwise, if custom footers are configured both on the system and project level, both will be shown simultaneously.

- **Position of custom project footers**: Determines the order in which system and project footers shown. If the previous setting allows project admins to override system footers, they can also change this order.

### Project-Level Settings

The first three settings (overrides) only take effect when specifically allowed by the REDCap administrator in the system settings of the module (see above).

- **Override system settings for project / data entry pages**: When enabled, the footer set at the system level for project / data entry pages will be overriden (i.e. only the footer specified in the project settings will be shown; if this footer is blank, no footer will be shown).

- **Override system settings for survey pages**: When enabled, the footer set at the system level for survey pages will be overriden (i.e. only the footer specified in the project settings will be shown; if this footer is blank, no footer will be shown).

- **Override system settings for protected email page**: When enabled, the footer set at the system level for the protected email page will be overriden (i.e. only the footer specified in the project settings will be shown; if this footer is blank, no footer will be shown).

- **Override footer position - show project footer**: Determines the order in which project and system footers are shown when both are enabled.

- **Enabled on**: Specifies on what type of pages (data entry and/or survey pages) the custom footer is shown.

- **Custom footer for project / data entry pages**:
  Add any Text/HTML to be injected as footer in data entry pages.

- **Custom footer for survey pages**: Choice to use the same custom footer as for data entry pages or a different one.

## Testing

Instructions for testing the module can be found [here](?prefix=redcap_custom_footer&page=tests/CustomFooterManualTest.md).

## Change Log

Version | Updates
------- | ----
1.3.2   | Fix Repo link in README.
1.3.1   | Minor bugfix.
1.3.0   | Add option to remove REDCap's cookie policy; minor bugfixes.
1.2.3   | More PHP8 compatibility fixes.
1.2.2   | PHP8 compatibility updates.
1.2.1   | Remove some dev files from release ZIP.
1.2.0   | Adds a new custom footer to be set for the Protected Email page.
1.1.3   | Add instructions for testing the module.
1.1.2   | Bug fix.
1.1.1   | Removed a type hint in the PHP code that would give an error in some PHP versions.
1.1.0   | Fixed incompatibilities with IE11, added changelog.
1.0.5   | Graceful handling of pages without #footer.
1.0.4   | Bugfix in reCAPTCHA css selector.
1.0.3   | Show footer on reCAPTCHA pages.
1.0.2   | Bugfix (config.json).
1.0.1   | Removed unneeded permissions.
1.0.0   | Initial release.

## How to cite this work

If you use this external module for a project that generates a research output, feel free to cite this software in addition to [citing REDCap](https://projectredcap.org/resources/citations/) itself. You can do so using the APA referencing style as below:

> Rezniczek, G. A. (2025). Custom Footer (Version 1.3.0) [Computer software]. https://doi.org/10.5281/zenodo.5749904

Or by adding this reference to your BibTeX database:

```bibtex
@software{Rezniczek_Custom_Footer_2025,
  author = {Rezniczek, GÃ¼nther A.},
  title = {{Custom Footer}},
  version = {1.3.2},
  year = {2025}
  month = {5},
  doi = {10.5281/zenodo.5749904},
  url = {https://github.com/grezniczek/redcap_custom_footer},
}
```

These instructions are also available in [GitHub](https://github.com/grezniczek/redcap_custom_footer) under 'Cite This Repository'.
